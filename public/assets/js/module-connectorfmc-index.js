"use strict";

/*
 * Copyright (C) MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Nikolay Beketov, 11 2018
 *
 */
var idUrl = 'module-connector-f-m-c';
var idForm = 'module-connectorfmc-form';
var className = 'ModuleConnectorFMC';
var inputClassName = 'mikopbx-module-input';
/* global globalRootUrl, globalTranslate, Form, Config, $ */

var ModuleConnectorFMC = {
  $formObj: $('#' + idForm),
  $checkBoxes: $('#' + idForm + ' .ui.checkbox'),
  $dropDowns: $('#' + idForm + ' .ui.dropdown'),
  $disabilityFields: $('#' + idForm + '  .disability'),

  /**
   * Field validation rules
   * https://semantic-ui.com/behaviors/form.html
   */
  validateRules: {
    incomingEndpointPort: {
      identifier: 'incomingEndpointPort',
      rules: [{
        type: 'integer[1..65000]',
        prompt: globalTranslate.module_connectorfmc_incomingEndpointPortIsEmpty
      }]
    },
    incomingEndpointLogin: {
      identifier: 'incomingEndpointLogin',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.module_connectorfmc_incomingEndpointLoginIsEmpty
      }]
    },
    incomingEndpointSecret: {
      identifier: 'incomingEndpointSecret',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.module_connectorfmc_incomingEndpointSecretIsEmpty
      }]
    },
    incomingEndpointHost: {
      identifier: 'incomingEndpointHost',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.module_connectorfmc_incomingEndpointHostIsEmpty
      }]
    },
    sipPort: {
      identifier: 'sipPort',
      rules: [{
        type: 'integer[5160..65000]',
        prompt: globalTranslate.module_connectorfmc_sipPortIsEmpty
      }]
    },
    amiPort: {
      identifier: 'amiPort',
      rules: [{
        type: 'integer[55000..60000]',
        prompt: globalTranslate.module_connectorfmc_amiPortIsEmpty
      }]
    },
    rtpPortStart: {
      identifier: 'rtpPortStart',
      rules: [{
        type: 'integer[40000..65000]',
        prompt: globalTranslate.module_connectorfmc_rtpPortStartIsEmpty
      }]
    },
    rtpPortEnd: {
      identifier: 'rtpPortEnd',
      rules: [{
        type: 'integer[40000..65000]',
        prompt: globalTranslate.module_connectorfmc_rtpPortEndIsEmpty
      }]
    }
  },

  /**
   * On page load we init some Semantic UI library
   */
  initialize: function initialize() {
    // инициализируем чекбоксы и выподающие менюшки
    window[className].$checkBoxes.checkbox();
    $('#useDelayedResponse').parent().checkbox();
    window[className].$dropDowns.dropdown();
    $('.menu .item').tab();
    $(".accordion").accordion();
    window[className].initializeForm();
    $('#outputEndpoint').parent().find('i').on('click', function () {
      $(this).parent().find('input').attr('value', 'SIP-FMC-' + window[className].generateUID(8).toUpperCase());
      $(this).parent().find('input').trigger('change');
    });
    $('#outputEndpointSecret').parent().find('i').on('click', function () {
      $(this).parent().find('input').val(window[className].generateUID(32));
      $(this).parent().find('input').trigger('change');
    });
  },

  /**
   * Create new password
   * @param length
   * @returns {string}
   */
  generateUID: function generateUID(length) {
    var charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    var password = "";

    for (var i = 0; i < length; i++) {
      var randomIndex = Math.floor(Math.random() * charset.length);
      password += charset[randomIndex];
    }

    return password;
  },

  /**
   * We can modify some data before form send
   * @param settings
   * @returns {*}
   */
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = window[className].$formObj.form('get values');
    result.data.extensions = result.data.peers.join(',');
    delete result.data.peers;
    return result;
  },

  /**
   * Some actions after forms send
   */
  cbAfterSendForm: function cbAfterSendForm() {},

  /**
   * Initialize form parameters
   */
  initializeForm: function initializeForm() {
    Form.$formObj = window[className].$formObj;
    Form.url = "".concat(globalRootUrl).concat(idUrl, "/save");
    Form.validateRules = window[className].validateRules;
    Form.cbBeforeSendForm = window[className].cbBeforeSendForm;
    Form.cbAfterSendForm = window[className].cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  window[className].initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUtY29ubmVjdG9yZm1jLWluZGV4LmpzIl0sIm5hbWVzIjpbImlkVXJsIiwiaWRGb3JtIiwiY2xhc3NOYW1lIiwiaW5wdXRDbGFzc05hbWUiLCJNb2R1bGVDb25uZWN0b3JGTUMiLCIkZm9ybU9iaiIsIiQiLCIkY2hlY2tCb3hlcyIsIiRkcm9wRG93bnMiLCIkZGlzYWJpbGl0eUZpZWxkcyIsInZhbGlkYXRlUnVsZXMiLCJpbmNvbWluZ0VuZHBvaW50UG9ydCIsImlkZW50aWZpZXIiLCJydWxlcyIsInR5cGUiLCJwcm9tcHQiLCJnbG9iYWxUcmFuc2xhdGUiLCJtb2R1bGVfY29ubmVjdG9yZm1jX2luY29taW5nRW5kcG9pbnRQb3J0SXNFbXB0eSIsImluY29taW5nRW5kcG9pbnRMb2dpbiIsIm1vZHVsZV9jb25uZWN0b3JmbWNfaW5jb21pbmdFbmRwb2ludExvZ2luSXNFbXB0eSIsImluY29taW5nRW5kcG9pbnRTZWNyZXQiLCJtb2R1bGVfY29ubmVjdG9yZm1jX2luY29taW5nRW5kcG9pbnRTZWNyZXRJc0VtcHR5IiwiaW5jb21pbmdFbmRwb2ludEhvc3QiLCJtb2R1bGVfY29ubmVjdG9yZm1jX2luY29taW5nRW5kcG9pbnRIb3N0SXNFbXB0eSIsInNpcFBvcnQiLCJtb2R1bGVfY29ubmVjdG9yZm1jX3NpcFBvcnRJc0VtcHR5IiwiYW1pUG9ydCIsIm1vZHVsZV9jb25uZWN0b3JmbWNfYW1pUG9ydElzRW1wdHkiLCJydHBQb3J0U3RhcnQiLCJtb2R1bGVfY29ubmVjdG9yZm1jX3J0cFBvcnRTdGFydElzRW1wdHkiLCJydHBQb3J0RW5kIiwibW9kdWxlX2Nvbm5lY3RvcmZtY19ydHBQb3J0RW5kSXNFbXB0eSIsImluaXRpYWxpemUiLCJ3aW5kb3ciLCJjaGVja2JveCIsInBhcmVudCIsImRyb3Bkb3duIiwidGFiIiwiYWNjb3JkaW9uIiwiaW5pdGlhbGl6ZUZvcm0iLCJmaW5kIiwib24iLCJhdHRyIiwiZ2VuZXJhdGVVSUQiLCJ0b1VwcGVyQ2FzZSIsInRyaWdnZXIiLCJ2YWwiLCJsZW5ndGgiLCJjaGFyc2V0IiwicGFzc3dvcmQiLCJpIiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjYkJlZm9yZVNlbmRGb3JtIiwic2V0dGluZ3MiLCJyZXN1bHQiLCJkYXRhIiwiZm9ybSIsImV4dGVuc2lvbnMiLCJwZWVycyIsImpvaW4iLCJjYkFmdGVyU2VuZEZvcm0iLCJGb3JtIiwidXJsIiwiZ2xvYmFsUm9vdFVybCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQSxLQUFLLEdBQU8sd0JBQWxCO0FBQ0EsSUFBTUMsTUFBTSxHQUFNLDBCQUFsQjtBQUNBLElBQU1DLFNBQVMsR0FBRyxvQkFBbEI7QUFDQSxJQUFNQyxjQUFjLEdBQUcsc0JBQXZCO0FBRUE7O0FBQ0EsSUFBTUMsa0JBQWtCLEdBQUc7QUFDMUJDLEVBQUFBLFFBQVEsRUFBRUMsQ0FBQyxDQUFDLE1BQUlMLE1BQUwsQ0FEZTtBQUUxQk0sRUFBQUEsV0FBVyxFQUFFRCxDQUFDLENBQUMsTUFBSUwsTUFBSixHQUFXLGVBQVosQ0FGWTtBQUcxQk8sRUFBQUEsVUFBVSxFQUFFRixDQUFDLENBQUMsTUFBSUwsTUFBSixHQUFXLGVBQVosQ0FIYTtBQUkxQlEsRUFBQUEsaUJBQWlCLEVBQUVILENBQUMsQ0FBQyxNQUFJTCxNQUFKLEdBQVcsZUFBWixDQUpNOztBQU0xQjtBQUNEO0FBQ0E7QUFDQTtBQUNDUyxFQUFBQSxhQUFhLEVBQUU7QUFDZEMsSUFBQUEsb0JBQW9CLEVBQUU7QUFDckJDLE1BQUFBLFVBQVUsRUFBRSxzQkFEUztBQUVyQkMsTUFBQUEsS0FBSyxFQUFFLENBQ047QUFDQ0MsUUFBQUEsSUFBSSxFQUFFLG1CQURQO0FBRUNDLFFBQUFBLE1BQU0sRUFBRUMsZUFBZSxDQUFDQztBQUZ6QixPQURNO0FBRmMsS0FEUjtBQVVkQyxJQUFBQSxxQkFBcUIsRUFBRTtBQUN0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LCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSBNSUtPIExMQyAtIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAqIFVuYXV0aG9yaXplZCBjb3B5aW5nIG9mIHRoaXMgZmlsZSwgdmlhIGFueSBtZWRpdW0gaXMgc3RyaWN0bHkgcHJvaGliaXRlZFxuICogUHJvcHJpZXRhcnkgYW5kIGNvbmZpZGVudGlhbFxuICogV3JpdHRlbiBieSBOaWtvbGF5IEJla2V0b3YsIDExIDIwMThcbiAqXG4gKi9cbmNvbnN0IGlkVXJsICAgICA9ICdtb2R1bGUtY29ubmVjdG9yLWYtbS1jJztcbmNvbnN0IGlkRm9ybSAgICA9ICdtb2R1bGUtY29ubmVjdG9yZm1jLWZvcm0nO1xuY29uc3QgY2xhc3NOYW1lID0gJ01vZHVsZUNvbm5lY3RvckZNQyc7XG5jb25zdCBpbnB1dENsYXNzTmFtZSA9ICdtaWtvcGJ4LW1vZHVsZS1pbnB1dCc7XG5cbi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLCBnbG9iYWxUcmFuc2xhdGUsIEZvcm0sIENvbmZpZywgJCAqL1xuY29uc3QgTW9kdWxlQ29ubmVjdG9yRk1DID0ge1xuXHQkZm9ybU9iajogJCgnIycraWRGb3JtKSxcblx0JGNoZWNrQm94ZXM6ICQoJyMnK2lkRm9ybSsnIC51aS5jaGVja2JveCcpLFxuXHQkZHJvcERvd25zOiAkKCcjJytpZEZvcm0rJyAudWkuZHJvcGRvd24nKSxcblx0JGRpc2FiaWxpdHlGaWVsZHM6ICQoJyMnK2lkRm9ybSsnICAuZGlzYWJpbGl0eScpLFxuXG5cdC8qKlxuXHQgKiBGaWVsZCB2YWxpZGF0aW9uIHJ1bGVzXG5cdCAqIGh0dHBzOi8vc2VtYW50aWMtdWkuY29tL2JlaGF2aW9ycy9mb3JtLmh0bWxcblx0ICovXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRpbmNvbWluZ0VuZHBvaW50UG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2luY29taW5nRW5kcG9pbnRQb3J0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnaW50ZWdlclsxLi42NTAwMF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9jb25uZWN0b3JmbWNfaW5jb21pbmdFbmRwb2ludFBvcnRJc0VtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdGluY29taW5nRW5kcG9pbnRMb2dpbjoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2luY29taW5nRW5kcG9pbnRMb2dpbicsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZSAgIDogJ2VtcHR5Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5tb2R1bGVfY29ubmVjdG9yZm1jX2luY29taW5nRW5kcG9pbnRMb2dpbklzRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0aW5jb21pbmdFbmRwb2ludFNlY3JldDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2luY29taW5nRW5kcG9pbnRTZWNyZXQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubW9kdWxlX2Nvbm5lY3RvcmZtY19pbmNvbWluZ0VuZHBvaW50U2VjcmV0SXNFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRpbmNvbWluZ0VuZHBvaW50SG9zdDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2luY29taW5nRW5kcG9pbnRIb3N0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnZW1wdHknLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9jb25uZWN0b3JmbWNfaW5jb21pbmdFbmRwb2ludEhvc3RJc0VtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdHNpcFBvcnQ6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdzaXBQb3J0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnaW50ZWdlcls1MTYwLi42NTAwMF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9jb25uZWN0b3JmbWNfc2lwUG9ydElzRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0YW1pUG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2FtaVBvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdpbnRlZ2VyWzU1MDAwLi42MDAwMF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9jb25uZWN0b3JmbWNfYW1pUG9ydElzRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0cnRwUG9ydFN0YXJ0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAncnRwUG9ydFN0YXJ0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnaW50ZWdlcls0MDAwMC4uNjUwMDBdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5tb2R1bGVfY29ubmVjdG9yZm1jX3J0cFBvcnRTdGFydElzRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0cnRwUG9ydEVuZDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ3J0cFBvcnRFbmQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdpbnRlZ2VyWzQwMDAwLi42NTAwMF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm1vZHVsZV9jb25uZWN0b3JmbWNfcnRwUG9ydEVuZElzRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdH0sXG5cdC8qKlxuXHQgKiBPbiBwYWdlIGxvYWQgd2UgaW5pdCBzb21lIFNlbWFudGljIFVJIGxpYnJhcnlcblx0ICovXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0Ly8g0LjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXQvCDRh9C10LrQsdC+0LrRgdGLINC4INCy0YvQv9C+0LTQsNGO0YnQuNC1INC80LXQvdGO0YjQutC4XG5cdFx0d2luZG93W2NsYXNzTmFtZV0uJGNoZWNrQm94ZXMuY2hlY2tib3goKTtcblxuXHRcdCQoJyN1c2VEZWxheWVkUmVzcG9uc2UnKS5wYXJlbnQoKS5jaGVja2JveCgpXG5cblx0XHR3aW5kb3dbY2xhc3NOYW1lXS4kZHJvcERvd25zLmRyb3Bkb3duKCk7XG5cdFx0JCgnLm1lbnUgLml0ZW0nKS50YWIoKTtcblx0XHQkKFwiLmFjY29yZGlvblwiKS5hY2NvcmRpb24oKTtcblx0XHR3aW5kb3dbY2xhc3NOYW1lXS5pbml0aWFsaXplRm9ybSgpO1xuXG5cdFx0JCgnI291dHB1dEVuZHBvaW50JykucGFyZW50KCkuZmluZCgnaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCdpbnB1dCcpLmF0dHIoJ3ZhbHVlJywgJ1NJUC1GTUMtJyt3aW5kb3dbY2xhc3NOYW1lXS5nZW5lcmF0ZVVJRCg4KS50b1VwcGVyQ2FzZSgpKTtcblx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnaW5wdXQnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9KTtcblx0XHQkKCcjb3V0cHV0RW5kcG9pbnRTZWNyZXQnKS5wYXJlbnQoKS5maW5kKCdpJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0JykudmFsKHdpbmRvd1tjbGFzc05hbWVdLmdlbmVyYXRlVUlEKDMyKSk7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0JykudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIENyZWF0ZSBuZXcgcGFzc3dvcmRcblx0ICogQHBhcmFtIGxlbmd0aFxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgKi9cblx0Z2VuZXJhdGVVSUQobGVuZ3RoKSB7XG5cdFx0Y29uc3QgY2hhcnNldCA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlcIjtcblx0XHRsZXQgcGFzc3dvcmQgPSBcIlwiO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnNldC5sZW5ndGgpO1xuXHRcdFx0cGFzc3dvcmQgKz0gY2hhcnNldFtyYW5kb21JbmRleF07XG5cdFx0fVxuXHRcdHJldHVybiBwYXNzd29yZDtcblx0fSxcblx0LyoqXG5cdCAqIFdlIGNhbiBtb2RpZnkgc29tZSBkYXRhIGJlZm9yZSBmb3JtIHNlbmRcblx0ICogQHBhcmFtIHNldHRpbmdzXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0Y2JCZWZvcmVTZW5kRm9ybShzZXR0aW5ncykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHNldHRpbmdzO1xuXHRcdHJlc3VsdC5kYXRhID0gd2luZG93W2NsYXNzTmFtZV0uJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdHJlc3VsdC5kYXRhLmV4dGVuc2lvbnMgPSByZXN1bHQuZGF0YS5wZWVycy5qb2luKCcsJyk7XG5cdFx0ZGVsZXRlIHJlc3VsdC5kYXRhLnBlZXJzO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdC8qKlxuXHQgKiBTb21lIGFjdGlvbnMgYWZ0ZXIgZm9ybXMgc2VuZFxuXHQgKi9cblx0Y2JBZnRlclNlbmRGb3JtKCkge1xuXHR9LFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSBmb3JtIHBhcmFtZXRlcnNcblx0ICovXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSB3aW5kb3dbY2xhc3NOYW1lXS4kZm9ybU9iajtcblx0XHRGb3JtLnVybCA9IGAke2dsb2JhbFJvb3RVcmx9JHtpZFVybH0vc2F2ZWA7XG5cdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzID0gd2luZG93W2NsYXNzTmFtZV0udmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSB3aW5kb3dbY2xhc3NOYW1lXS5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gd2luZG93W2NsYXNzTmFtZV0uY2JBZnRlclNlbmRGb3JtO1xuXHRcdEZvcm0uaW5pdGlhbGl6ZSgpO1xuXHR9LFxufTtcblxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXHR3aW5kb3dbY2xhc3NOYW1lXS5pbml0aWFsaXplKCk7XG59KTtcblxuIl19